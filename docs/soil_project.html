<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Soil Science Project ‚Äì Adrianna Martinez</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-4d0a8ab1528a2302dba6d67982759051.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Adrianna Martinez</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./courses.html"> 
<span class="menu-text">Courses</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./resume.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#research-question" id="toc-research-question" class="nav-link active" data-scroll-target="#research-question">Research Question</a></li>
  <li><a href="#site-overview" id="toc-site-overview" class="nav-link" data-scroll-target="#site-overview">Site Overview</a></li>
  <li><a href="#key-findings" id="toc-key-findings" class="nav-link" data-scroll-target="#key-findings">Key Findings</a></li>
  <li><a href="#visual-evidence" id="toc-visual-evidence" class="nav-link" data-scroll-target="#visual-evidence">Visual Evidence</a></li>
  <li><a href="#soil-type-comparison" id="toc-soil-type-comparison" class="nav-link" data-scroll-target="#soil-type-comparison">Soil Type Comparison</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Soil Science Project</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="research-question" class="level2 research-question">
<h2 class="anchored" data-anchor-id="research-question">Research Question</h2>
<p>**How do the soil-forming processes at Bryce Canyon affect plant growth and adaptation?**</p>
<p>This study examines the relationship between soil types at Bryce Canyon National Park and plant adaptability, revealing insights into resilience in harsh, semi-arid conditions. Understanding these processes can inform conservation efforts and land management practices (Carr et al., 2022; Hildebrand, 2012).</p>
</section>
<hr>
<section id="site-overview" class="level2 site-overview">
<h2 class="anchored" data-anchor-id="site-overview">Site Overview</h2>
<p>Bryce Canyon National Park is characterized by dramatic topography including high mesas, cliffs, and deep canyons. The park‚Äôs soils are primarily composed of **Entisols** and **Aridisols**, formed from sandstone and limestone parent materials. The region‚Äôs semiarid climate, combined with factors such as slope, elevation, and vegetation cover, creates diverse soil types that vary from deep, loamy soils in lowland areas to shallow, rocky soils on exposed ridges.</p>
<p>Two key soil types dominate the landscape:</p>
<ul>
<li>**Brycan very fine sandy loam**: Typically found on gentle slopes with fine texture that allows for moderate water retention</li>
<li>**Paunsaugunt gravelly loam**: Located at higher elevations and steeper slopes, characterized by coarser texture and well-drained conditions</li>
</ul>
</section>
<hr>
<section id="key-findings" class="level2 key-findings-section">
<h2 class="anchored" data-anchor-id="key-findings">Key Findings</h2>
<div class="findings-grid">
<section id="soil-distribution-patterns" class="level3 key-finding">
<h3 class="anchored" data-anchor-id="soil-distribution-patterns">üåç Soil Distribution Patterns</h3>
<p>Bryce Canyon features distinct soil zonation based on topography. Brycan very fine sandy loam dominates gentle slopes, while Paunsaugunt gravelly loam characterizes steeper, higher elevation areas, creating diverse growing conditions.</p>
</section>
<section id="moisture-variation-and-vegetation" class="level3 key-finding">
<h3 class="anchored" data-anchor-id="moisture-variation-and-vegetation">Moisture Variation and Vegetation</h3>
<p>Lowland areas with fine sandy loam retain more moisture, supporting diverse vegetation including grasses, forbs, and shrubs. Eolian-derived soils in these areas have higher moisture retention capacity due to their fine texture (Woods et al., 2001).</p>
</section>
<section id="plant-adaptation-strategies" class="level3 key-finding">
<h3 class="anchored" data-anchor-id="plant-adaptation-strategies">üå≤ Plant Adaptation Strategies</h3>
<p>Upland species like Utah juniper and pinyon pine thrive through specialized deep root systems that access water stored deeper in the soil profile. These adaptations allow survival in areas with coarser, well-drained soils (Graybosch &amp; Buchanan, 1983; Stein, 1988).</p>
</section>
<section id="climate-change-impacts" class="level3 key-finding">
<h3 class="anchored" data-anchor-id="climate-change-impacts">üå°Ô∏è Climate Change Impacts</h3>
<p>Declining snowfall and reduced evapotranspiration have shifted vegetation patterns toward species adapted to drier conditions, particularly affecting higher elevation areas where soil moisture is already limited (Carr et al., 2022; Hildebrand, 2012).</p>
</section>
<section id="parent-material-influence" class="level3 key-finding">
<h3 class="anchored" data-anchor-id="parent-material-influence">ü™® Parent Material Influence</h3>
<p>Soils formed from limestone parent material tend to be more alkaline and less fertile, limiting plant growth. In contrast, sandstone-derived soils have more neutral pH and better moisture retention, supporting more diverse vegetation (Marine, 1963).</p>
</section>
<section id="microhabitat-creation" class="level3 key-finding">
<h3 class="anchored" data-anchor-id="microhabitat-creation">üèîÔ∏è Microhabitat Creation</h3>
<p>Variations in soil texture, depth, and water retention capacity create distinct microhabitats throughout the park. These differences determine which plant species can thrive in each area (Graybosch &amp; Buchanan, 1983).</p>
</section>
</div>
</section>
<hr>
<section id="visual-evidence" class="level2 visual-section">
<h2 class="anchored" data-anchor-id="visual-evidence">Visual Evidence</h2>
<section id="figure-1-soil-map-of-bryce-canyon-national-park" class="level3 figure-container">
<h3 class="anchored" data-anchor-id="figure-1-soil-map-of-bryce-canyon-national-park">Figure 1: Soil Map of Bryce Canyon National Park</h3>
<p>```{r, echo=FALSE, fig.cap=‚ÄúSoil distribution map showing Brycan very fine sandy loam and Paunsaugunt gravelly loam throughout Bryce Canyon National Park. Source: Web Soil Survey (2024)‚Äù, out.width=‚Äú100%‚Äù} # Insert your soil map image knitr::include_graphics(‚Äúimages/soil_map.png‚Äù) ```</p>
<p>*Soil map illustrating the spatial distribution of major soil types across Bryce Canyon National Park, highlighting the prevalence of fine sandy loams in lowland areas and gravelly loams on steeper terrain.*</p>
</section>
<section id="figure-2-ecoregions-of-utah" class="level3 figure-container">
<h3 class="anchored" data-anchor-id="figure-2-ecoregions-of-utah">Figure 2: Ecoregions of Utah</h3>
<p>```{r, echo=FALSE, fig.cap=‚ÄúEcoregions map of Utah with Bryce Canyon region highlighted, showing the Wasatch and Uinta Mountains context. Source: Woods et al.&nbsp;(2001)‚Äù, out.width=‚Äú100%‚Äù} # Insert your ecoregion map knitr::include_graphics(‚Äúimages/ecoregion_map.png‚Äù) ```</p>
<p>*Regional ecoregions map contextualizing Bryce Canyon within the Wasatch and Uinta Mountains ecoregion, demonstrating the park‚Äôs position within broader ecological zones of Utah.*</p>
</section>
</section>
<hr>
<section id="soil-type-comparison" class="level2">
<h2 class="anchored" data-anchor-id="soil-type-comparison">Soil Type Comparison</h2>
<div class="soil-comparison">
<section id="brycan-very-fine-sandy-loam" class="level3 soil-card">
<h3 class="anchored" data-anchor-id="brycan-very-fine-sandy-loam">Brycan Very Fine Sandy Loam</h3>
<ul>
<li><strong>Location</strong>: Gentle slopes, lowland areas</li>
<li><strong>Texture</strong>: Fine, well-structured</li>
<li><strong>Water retention</strong>: Moderate to high</li>
<li><strong>Vegetation</strong>: Grasses, forbs, shrubs</li>
<li><strong>Origin</strong>: Eolian (wind-deposited) sandstone</li>
<li><strong>pH</strong>: More neutral</li>
<li><strong>Fertility</strong>: Higher nutrient availability</li>
<li><strong>Plant diversity</strong>: Supports broader species variety</li>
</ul>
</section>
<section id="paunsaugunt-gravelly-loam" class="level3 soil-card">
<h3 class="anchored" data-anchor-id="paunsaugunt-gravelly-loam">Paunsaugunt Gravelly Loam</h3>
<ul>
<li><strong>Location</strong>: Steep slopes, higher elevations</li>
<li><strong>Texture</strong>: Coarse, rocky</li>
<li><strong>Water retention</strong>: Low (rapid drainage)</li>
<li><strong>Vegetation</strong>: Pinyon pine, Utah juniper</li>
<li><strong>Characteristics</strong>: Shallow, well-drained</li>
<li><strong>pH</strong>: Variable, often more alkaline</li>
<li><strong>Fertility</strong>: Lower nutrient availability</li>
<li><strong>Plant diversity</strong>: Limited to drought-adapted species</li>
</ul>
</section>
</div>
<hr>
</section>
<section id="discussion" class="level2 discussion-section">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>The soils of Bryce Canyon are shaped by complex interactions of climate, topography, and parent material. The slower-draining soils in lowland areas (Brycan soils) provide more stable moisture conditions, supporting a variety of plants. In contrast, the coarser soils in upland areas (Paunsaugunt gravelly loam) promote plant species adapted to drier conditions.</p>
<p>Woods et al.&nbsp;(2001) emphasize that areas with exposed bedrock, such as canyon walls and structural benches, have shallow, rocky soils less conducive to plant growth. These regions are dominated by species that can withstand harsh conditions including low nutrient availability and high evaporation rates.</p>
<p>Soil-forming processes‚Äîincluding erosion, weathering, and deposition‚Äîplay a fundamental role in determining which plant species can survive in different parts of the park. The combination of Quaternary colluvium, alluvium, and eolian materials shapes these soils, with variations in moisture availability directly affecting vegetation at each elevation and topographic position.</p>
</section>
<hr>
<section id="conclusion" class="level2 conclusion-box">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Soil-forming processes significantly impact plant growth and adaptation in Bryce Canyon National Park. The diverse soil types, ranging from fine sandy loams to gravelly, rocky types, create distinct microhabitats that favor different plant species.</p>
<p>Climate change, particularly the decrease in snowfall, further exacerbates challenges faced by plant species in the park, especially in areas with less moisture-retentive soils.</p>
<section id="future-research-directions" class="level3">
<h3 class="anchored" data-anchor-id="future-research-directions">Future Research Directions</h3>
<ul>
<li>Collect real-time soil moisture data across various soil types to understand seasonal variations</li>
<li>Examine the role of soil microbes and their interaction with plant roots</li>
<li>Assess long-term vegetation responses to continued climate change</li>
</ul>
</section>
</section>
<hr>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" role="list">
<p>Carr, A., Stark, A., Grinstead, A., &amp; Frost, M. (2022). *Bryce Canyon Water Resources: Monitoring Vegetation Health and Water Availability in Bryce Canyon National Park for Drought Stress Mitigation Planning*. NASA DEVELOP National Program Maryland-Goddard.</p>
<p>Graybosch, R.A., &amp; Buchanan, H. (1983). Vegetative types and endemic plants of the Bryce Canyon Breaks. *Great Basin Naturalist*, 43(4), Article 19. https://scholarsarchive.byu.edu/gbn/vol43/iss4/19</p>
<p>Hildebrand, T. (2012). *Correlation Between Wetland Vegetative and Microbial Community Diversity of Bryce Canyon National Park‚Äôs Southern Regions‚ÄìPhase I*. Colorado Plateau Cooperative Ecosystems Studies Unit; Agreement No.&nbsp;H1200-09-0005.</p>
<p>Marine, I. (1963). Ground-water resources of the Bryce Canyon National Park area, Utah, with a section on the drilling of a test well. *Hydrology of the Public Domain (Water Supply Paper 1475)*, 441-477.</p>
<p>Stein, S.J. (1988). Fire history of the Paunsaugunt Plateau in southern Utah. *The Great Basin Naturalist*, 48(1), 58-63. http://www.jstor.org/stable/41712409</p>
<p>Web Soil Survey (WSS). (2024). *Web Soil Survey - Home*. Retrieved from https://websoilsurvey.nrcs.usda.gov/</p>
<p>Woods, A.J., Lammers, D.A., Bryce, S.A., Omernik, J.M., Denton, R.L., Domeier, M., &amp; Comstock, J.A. (2001). *Ecoregions of Utah* (color poster with map, descriptive text, summary tables, and photographs). Reston, Virginia: U.S. Geological Survey (map scale 1:1,175,000).</p>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>